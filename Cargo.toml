[package]
name = "simd-mcaptcha-solver"
version = "0.1.0"
edition = "2024"

[dependencies]
bincode = "1.3"
generic-array = "1.2"
anyhow = { version = "1", optional = true }
clap = { version = "4", features = ["derive"], optional = true }
reqwest = { version = "0.12", default-features = false, features = ["json", "http2", "rustls-tls"], optional = true }
serde = { version = "1", features = ["derive"], optional = true }
serde_json = { version = "1", optional = true }
tokio = { version = "1", features = ["rt", "macros", "net"], optional = true }
pow_sha256 = { git = "https://github.com/mcaptcha/pow_sha256", tag = "0.3.1", optional = true }
rayon = { version = "1.10.0", optional = true }

[profile.release]
opt-level = 3
lto = true
panic = "abort"

[dev-dependencies]
pow_sha256 = { git = "https://github.com/mcaptcha/pow_sha256", tag = "0.3.1" }
rand = "0.9"
tokio = { version = "1", features = ["rt-multi-thread"] }
criterion = { version = "0.6.0", features = ["html_reports"] }
# sha2 = "0.10" # useful for debugging here or there

[[bench]]
name = "bench_proof"
harness = false

[features]
client = ["serde", "dep:rayon", "tokio","dep:serde_json", "dep:reqwest", "dep:anyhow"]
cli = ["dep:clap", "client", "tokio/rt-multi-thread"]
serde = ["dep:serde"]
tokio = ["dep:tokio"]
official = ["dep:pow_sha256"]

[[bin]]
name = "mcaptcha_pow_solver"
path = "src/main.rs"
required-features = ["cli"]
